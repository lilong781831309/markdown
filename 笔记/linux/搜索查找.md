

[TOC]

# 1、find 查找文件或者目录

```shell
find [搜索范围] [选项]

    -name<查询方式>	按照指定的文件名查找模式查找文件
    -user<用户名>	查找属于指定用户名所有文件
    -size<文件大小>	按照指定的文件大小查找文件,单位为: 
        b —— 块（512字节）
        c —— 字节
        w —— 字（2字节）
        k —— 千字节
        M —— 兆字节
        G —— 吉字节
        
1)、按文件名：根据名称查找/下的 *.conf。
# find / -name *.conf

2)、按拥有者：查找 /opt 目录下，用户名称为 lilong 的文件
# find /opt/ -user lilong

3)、按文件大小：在/home目录下查找大于200m的文件（+n 大于  -n小于   n等于）
# find /home -size +200M
```

# 2、locate 快速定位文件路径
```shell
locate 搜索文件

由于locate指令基于数据库进行查询，所以第一次运行前，必须使用updatedb指令创建locate数据库。

locate不会检索/tmp目录下的文件
```

# 3、grep 过滤查找
```shell
1)、常规用法
    grep [选项]  '关键字'  文件
        -n	        显示匹配行及行号
        -i          忽略大小写
        -v          取反
        ^关键字     以关键字开头
        关键字&     以关键字结束
        -B          包括匹配行的前几行,before
        -A          包括匹配行的前几行,after
        -C          包括匹配行的前几行及后几行,content
    
    # grep -n 'root' passwd
        1:root:x:0:0:ROOT:/root:/bin/bash
        10:operator:x:11:0:operator:/root:/sbin/nologin
        
    # grep -ni 'root' passwd
        1:root:x:0:0:ROOT:/root:/bin/bash
        10:operator:x:11:0:operator:/root:/sbin/nologin
        
    # grep -nB 3 'shutdown' passwd
        4-adm:x:3:4:adm:/var/adm:/sbin/nologin
        5-lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin
        6-sync:x:5:0:sync:/sbin:/bin/sync
        7:shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
      
    # grep -nA 3 'shutdown' passwd
        7:shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
        8-halt:x:7:0:halt:/sbin:/sbin/halt
        9-mail:x:8:12:mail:/var/spool/mail:/sbin/nologin
        10-operator:x:11:0:operator:/root:/sbin/nologin

    # grep -nC 3 'shutdown' passwd
        4-adm:x:3:4:adm:/var/adm:/sbin/nologin
        5-lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin
        6-sync:x:5:0:sync:/sbin:/bin/sync
        7:shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
        8-halt:x:7:0:halt:/sbin:/sbin/halt
        9-mail:x:8:12:mail:/var/spool/mail:/sbin/nologin
        10-operator:x:11:0:operator:/root:/sbin/nologin

    # grep -nv 'root' passwd
        2:bin:x:1:1:bin:/bin:/sbin/nologin
        3:daemon:x:2:2:daemon:/sbin:/sbin/nologin
        4:adm:x:3:4:adm:/var/adm:/sbin/nologin
        5:lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin
        6:sync:x:5:0:sync:/sbin:/bin/sync
        7:shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
        8:halt:x:7:0:halt:/sbin:/sbin/halt
        9:mail:x:8:12:mail:/var/spool/mail:/sbin/nologin
        11:games:x:12:100:games:/usr/games:/sbin/nologin
        12:ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin
        13:nobody:x:99:99:Nobody:/:/sbin/nologin
        14:systemd-network:x:192:192:systemd Network Management:/:/sbin/nologin
        15:dbus:x:81:81:System message bus:/:/sbin/nologin
        16:polkitd:x:999:998:User for polkitd:/:/sbin/nologin
        17:libstoragemgmt:x:998:997:daemon account for libstoragemgmt:/var/run/lsm:/sbin/nologin
        18:rpc:x:32:32:Rpcbind Daemon:/var/lib/rpcbind:/sbin/nologin
        19:ntp:x:38:38::/etc/ntp:/sbin/nologin
        20:abrt:x:173:173::/etc/abrt:/sbin/nologin
        21:sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin
        22:postfix:x:89:89::/var/spool/postfix:/sbin/nologin
        23:chrony:x:997:995::/var/lib/chrony:/sbin/nologin
        24:tcpdump:x:72:72::/:/sbin/nologin
        25:syslog:x:996:994::/home/syslog:/bin/false
        26:daishanhong:x:1000:1000::/home/daishanhong:/bin/bash
        27:lilong:x:1001:1001::/home/lilong:/bin/bash
        28:user001:x:600:600:user:/home/user001:/bin/bash
        29:user002:x:601:601:user:/home/user002:/bin/bash
        30:user003:x:602:602:user:/home/user003:/bin/bash
        31:user004:x:603:603:user:/home/user004:/bin/bash
        32:user005:x:604:604:user:/home/user005:/bin/bash
        33:user006:x:605:605:user:/home/user006:/bin/bash
        
2)、管道
# ll /etc | grep -n  bin
15:drwxr-xr-x.  2 root root     4096 Feb  3 00:34 binfmt.d
53:-rw-r--r--   1 root root      265 Sep 30  2020 gdbinit
54:drwxr-xr-x.  2 root root     4096 Sep 30  2020 gdbinit.d
```
