[TOC]

#### 1、du 统计文件或目录及子目录使用硬盘的空间大小

```shell
1)、用法
    du [选项][文件]
    
2)、选项
    -a	显示所有目录或文件的大小
    -b	以byte为单位，显示目录或文件的大小
    -c	显示目录或文件的总和
    -k	以KB为单位输出
    -m	以MB为单位输出
    -s	仅显示目录或文件的总计数值
    -h	以K,M,G为单位，提高信息可读性
    -x	跳过不同的文件系统目录
    -S	显示目录的大小，但不含子目录大小。
    -D	显示指定符号链接的源文件大小
3)、示例
    1)、# du -sh
        2.9G	.
    2)、# du -sh /usr
        1.9G	/usr
```
#### 2、df 查看磁盘空间使用情况 （disk free 空余硬盘）
```shell
1)、用法
    df  选项 文件
    
2)、选项
    -h	    --human-readable 使用人类可读的GBytes, MBytes, KBytes 等格式自行显示(预设值是不加这个选项的)
    -a      --all 包含所有的具有 0 Blocks 的文件系统
    -i      --inodes 列出 inode 资讯，不列出已使用 block
    --total                 显示所有的信息
    --block-size={SIZE}     使用 {SIZE} 大小的 Blocks
    
3)、示例
    (1) # df -h
    Filesystem      Size  Used Avail Use% Mounted on
    devtmpfs        909M     0  909M   0% /dev
    tmpfs           919M   24K  919M   1% /dev/shm
    tmpfs           919M  544K  919M   1% /run
    tmpfs           919M     0  919M   0% /sys/fs/cgroup
    /dev/vda1        50G  2.5G   45G   6% /
    tmpfs           184M     0  184M   0% /run/user/0
    
    (2) # df -i
    Filesystem      Inodes IUsed   IFree IUse% Mounted on
    devtmpfs        232625   320  232305    1% /dev
    tmpfs           235252     7  235245    1% /dev/shm
    tmpfs           235252   438  234814    1% /run
    tmpfs           235252    16  235236    1% /sys/fs/cgroup
    /dev/vda1      3276800 60147 3216653    2% /
    tmpfs           235252     1  235251    1% /run/user/0
    
    (3) # df --total
    Filesystem     1K-blocks    Used Available Use% Mounted on
    devtmpfs          930500       0    930500   0% /dev
    tmpfs             941008      24    940984   1% /dev/shm
    tmpfs             941008     584    940424   1% /run
    tmpfs             941008       0    941008   0% /sys/fs/cgroup
    /dev/vda1       51473868 2563520  46587228   6% /
    tmpfs             188204       0    188204   0% /run/user/0
    total           55415596 2564128  50528348   5% -

    (4) # df -a
    Filesystem     1K-blocks    Used Available Use% Mounted on
    sysfs                  0       0         0    - /sys
    proc                   0       0         0    - /proc
    devtmpfs          930500       0    930500   0% /dev
    securityfs             0       0         0    - /sys/kernel/security
    tmpfs             941008      24    940984   1% /dev/shm
    devpts                 0       0         0    - /dev/pts
    tmpfs             941008     584    940424   1% /run
    tmpfs             941008       0    941008   0% /sys/fs/cgroup
    cgroup                 0       0         0    - /sys/fs/cgroup/systemd
    pstore                 0       0         0    - /sys/fs/pstore
    cgroup                 0       0         0    - /sys/fs/cgroup/net_cls,net_prio
    cgroup                 0       0         0    - /sys/fs/cgroup/freezer
    cgroup                 0       0         0    - /sys/fs/cgroup/perf_event
    cgroup                 0       0         0    - /sys/fs/cgroup/cpu,cpuacct
    cgroup                 0       0         0    - /sys/fs/cgroup/blkio
    cgroup                 0       0         0    - /sys/fs/cgroup/memory
    cgroup                 0       0         0    - /sys/fs/cgroup/pids
    cgroup                 0       0         0    - /sys/fs/cgroup/hugetlb
    cgroup                 0       0         0    - /sys/fs/cgroup/devices
    cgroup                 0       0         0    - /sys/fs/cgroup/cpuset
    configfs               0       0         0    - /sys/kernel/config
    /dev/vda1       51473868 2563476  46587272   6% /
    systemd-1              0       0         0    - /proc/sys/fs/binfmt_misc
    hugetlbfs              0       0         0    - /dev/hugepages
    mqueue                 0       0         0    - /dev/mqueue
    debugfs                0       0         0    - /sys/kernel/debug
    tmpfs             188204       0    188204   0% /run/user/0
```

#### 3、fdisk 查看分区
```shell
1)、用法
    fdisk -l	（功能描述：查看磁盘分区详情）
2)、选项
    -l	显示所有硬盘的分区列表
3)、示例
	# fdisk -l
    Device      Boot    Start   End        Blocks     Id    System
    /dev/vda1   *       2048    104857566  52427759+  83    Linux
    
    解释:
        Device  ：分区序列
        Boot    ：引导
        Start   ：从X磁柱开始
        End     ：到Y磁柱结束
        Blocks  ：容量
        Id      ：分区类型ID
        System  ：分区类型
```

#### 4、lsblk 查看设备挂载情况
    1)、用法
        lsblk [f]
    2)、示例 
        # lsblk
        NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
        sr0     11:0    1 118.6M  0 rom  
        vda    253:0    0    50G  0 disk 
        └─vda1 253:1    0    50G  0 part /

#### 5、mount/umount 挂载/卸载
##### 5.1、mount
```shell
1)、用法
    mount [-参数] [设备名称] [挂载点] 

2)、参数：
    -a  安装在/etc/fstab文件中类出的所有文件系统。
    -f  伪装mount，作出检查设备和目录的样子，但并不真正挂载文件系统。
    -n  不把安装记录在/etc/mtab 文件中。
    -r  讲文件系统安装为只读。
    -v  详细显示安装信息。
    -w  将文件系统安装为可写，为命令默认情况。
    -t  指定设备的文件系统类型，一般而言，Linux会自动探测分区的文件系统，除非让你指定时，否则-t ... 可以省掉。常见的有： 
            ext2        linux目前常用的文件系统 
            msdos       MS-DOS的fat，就是fat16 
            vfat        windows98常用的fat32 
            nfs         UNIX(LINUX) 文件网络共享
            iso9660     CD-ROM,光盘或光盘镜像
            ntfs        windows NT/2000/XP的文件系统 
            smbfs       Mount   Windows文件网络共享
            auto        自动检测文件系统 
    -o  指定挂载文件系统时的选项，有些也可写到在/etc/fstab中。使用多个-o参数的时候，-o 只用一次，参数之间用半角逗号隔开。常用的有： 
        defaults        使用所有选项的默认值（auto、nouser、rw、suid）
        auto/noauto     允许/不允许以 –a选项进行安装
        dev/nodev       对/不对文件系统上的特殊设备进行解释
        exec/noexec     允许/不允许执行二进制代码
        suid/nosuid     确认/不确认suid和sgid位
        user/nouser     允许/不允许一般用户挂载
        codepage=XXX    代码页 
        iocharset=XXX   字符集 
        ro              以只读方式挂载 
        rw              以读写方式挂载 
        remount         重新安装已经安装了的文件系统
        loop            挂载回旋设备
    -B  --bind,挂载目录,将一个目录中的内容挂载到另一个目录上,"df"命令查不到，但用"df -a"可以查看到
        
3)、示例：
    # mount –o remount,rw /
    
    # mount -t vfat /dev/hda5 /mnt/hda5
    
    # mount –o iocharset=gb2312,codepage=936 /dev/hda5 /mnt/hda5
    
    # mount --bind olddir newdir
    
4)、开机自动挂载
    文件挂载的配置文件：/etc/fstab
    proc                 /proc                proc       defaults              0 0
    sysfs                /sys                 sysfs      noauto                0 0
    debugfs              /sys/kernel/debug    debugfs    noauto                0 0
    devpts               /dev/pts             devpts     mode=0620,gid=5       0 0

    其每行的格式如下:
    要挂载的设备或伪文件系统  挂载点  文件系统类型  挂载选项 转储频率 自检次序
    
    要挂载的设备或伪文件系统：设备文件、LABEL(LABEL="")、UUID(UUID="")、伪文件系统名称(proc, sysfs)
    挂载点  ：      指定的文件夹
    挂载选项：      defaults
    转储频率：
        0：不做备份
        1：每天转储
        2：每隔一天转储
    自检次序：
        0：不自检
        1：首先自检；一般只有rootfs才用1
```
##### 5.2、unmount
```shell
(1)、用法
    umount 挂载点
(2)、相关命令
    1)、lsof + 挂载点，查看在指定挂载点上运行的程序
    2)、fuser + 挂载点 可以查看并杀死在挂载点上执行的程序
        -v 详细查看
        -m 递归，如不加m，只查看挂载点自身，不查看子目录
        -k 结束进程
        -vmk 组合选项可以一起使用
```



#### 6、添加swap文件

```shell
# 创建swap文件
  dd if=/dev/zero of=/swapfile bs=1M count=8192
  chmod 600 /swapfile
  
# 变成swap文件
  mkswap /swapfile
  
# 启用
  swapon /swapfile
  
# 挂载
  vim /etc/fstab
  /swapfile swap swap default 0 0
  mount -a
 
# 停用
  swapoff /dev/swapfile
```

