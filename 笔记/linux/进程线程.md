[TOC]

#### 1、ps 查看当前系统进程状态

```shell
ps:process status 进程状态
```
##### 1.1、ps -ef
```shell
# ps -ef
UID        PID  PPID  C STIME TTY          TIME CMD
root         1     0  0 Apr08 ?        00:00:11 /usr/lib/systemd/systemd --switched-root --system --deserialize 22
root         2     0  0 Apr08 ?        00:00:00 [kthreadd]
root         4     2  0 Apr08 ?        00:00:00 [kworker/0:0H]
root         5     2  0 Apr08 ?        00:00:01 [kworker/u2:0]
root         6     2  0 Apr08 ?        00:00:05 [ksoftirqd/0]
root         7     2  0 Apr08 ?        00:00:00 [migration/0]
root         8     2  0 Apr08 ?        00:00:00 [rcu_bh]
root         9     2  0 Apr08 ?        00:00:08 [rcu_sched]
root        10     2  0 Apr08 ?        00:00:00 [lru-add-drain]
root        11     2  0 Apr08 ?        00:00:00 [watchdog/0]
root        13     2  0 Apr08 ?        00:00:00 [kdevtmpfs]
root        14     2  0 Apr08 ?        00:00:00 [netns]
root        15     2  0 Apr08 ?        00:00:00 [khungtaskd]
root        16     2  0 Apr08 ?        00:00:00 [writeback]
root        17     2  0 Apr08 ?        00:00:00 [kintegrityd]
root        18     2  0 Apr08 ?        00:00:00 [bioset]
root        19     2  0 Apr08 ?        00:00:00 [bioset]
root        20     2  0 Apr08 ?        00:00:00 [bioset]
```


```shell
解释：
UID     用户ID 
PID     进程ID 
PPID    父进程ID 
C       CPU用于计算执行优先级的因子。数值越大，表明进程是CPU密集型运算，执行优先级会降低；数值越小，表明进程是I/O密集型运算，执行优先级会提高 
STIME   进程启动的时间 
TTY     完整的终端名称 
TIME    CPU时间 
CMD     启动进程所用的命令和参数
```

##### 1.2、ps -aux
```shell
# ps -aux|more
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  0.0  0.2  51668  3816 ?        Ss   Apr08   0:10 /usr/lib/systemd/systemd --switched-root --system --deserialize 22
root         2  0.0  0.0      0     0 ?        S    Apr08   0:00 [kthreadd]
root         4  0.0  0.0      0     0 ?        S<   Apr08   0:00 [kworker/0:0H]
root         5  0.0  0.0      0     0 ?        S    Apr08   0:01 [kworker/u2:0]
root         6  0.0  0.0      0     0 ?        S    Apr08   0:05 [ksoftirqd/0]
root         7  0.0  0.0      0     0 ?        S    Apr08   0:00 [migration/0]
root         8  0.0  0.0      0     0 ?        S    Apr08   0:00 [rcu_bh]
root         9  0.0  0.0      0     0 ?        R    Apr08   0:08 [rcu_sched]
root        10  0.0  0.0      0     0 ?        S<   Apr08   0:00 [lru-add-drain]
root        11  0.0  0.0      0     0 ?        S    Apr08   0:00 [watchdog/0]
root        13  0.0  0.0      0     0 ?        S    Apr08   0:00 [kdevtmpfs]
root        14  0.0  0.0      0     0 ?        S<   Apr08   0:00 [netns]
root        15  0.0  0.0      0     0 ?        S    Apr08   0:00 [khungtaskd]
root        16  0.0  0.0      0     0 ?        S<   Apr08   0:00 [writeback]
root        17  0.0  0.0      0     0 ?        S<   Apr08   0:00 [kintegrityd]

解释：
USER    进程的属主
PID     进程的ID
%CPU    进程占用的CPU百分比
%MEM    进程占用内存的百分比
VSZ     进程进程占用虚拟内存的大小（KB）
RSS     进程占用实际物理内存的大小（KB）（驻留中页的数量）
TTY     该进程是在哪个终端中运行的。其中tty1-tty7代表本地控制台终端，tty1-tty6是本地的字符界面终端，tty7是图形终端。pts/0-255代表虚拟终端。
START   该进程的启动时间
TIME    该进程占用CPU的运算时间
COMMAND 命令的名称和参数
STAT    进程状态
        D 无法中断的休眠状态（通常 IO 的进程）
        R 正在运行
        S 休眠状态
        T 停止或被追踪
        Z 僵尸进程
        < 优先级高的进程
        N 优先级较低的进程
        L 有些页被锁进内存
        s 有子进程
        l 多进程的
        + 位于后台的进程组
```

#### 2、kill 终止进程
```shell
(1)、重新加载进程(1:HUP)
    kill - 1   进程号 
    
(2)、杀死一个进程(9:KILL)
    kill - 9   进程号 
    
(3)、正常停止一个进程(15:TERM)
    kill - 15  进程号 
```

#### 3、pstree 查看进程树
```shell
(1)、用法
    pstree [选项]

(2)、选项说明
    -p	显示进程的PID 
    -u	显示进程的所属用户
```

#### 4、top 查看系统健康状态
```shell
(1)、用法
    top [选项]
    
(2)、选项说明
    -d  秒数	指定top命令每隔几秒更新。默认是3秒在top命令的交互模式当中可以执行的命令
    -i	        使top不显示任何闲置或者僵死进程
    -p	        通过指定监控进程ID来仅仅监控某个进程的状态
    
(3)、操作说明
    P	以CPU使用率排序，默认就是此项 
    M	以内存的使用率排序
    N	以PID排序
    q	退出top

(4)、字段解释
    第一行信息为任务队列信息 top-
        20:47:57	                        系统当前时间
        up 1 day, 17:29	                    系统的运行时间，本机已经运行1天 17小时29分钟
        2 users	                            当前登录了两个用户
        load  average:  0.00, 0.02, 0.06	系统在之前1分钟，5分钟，15分钟的平均负载。一般认为小于1时，负载较小。如果大于1，系统已经超出负荷。
    第二行为进程信息 Tasks:
        82 total	                        系统中的进程总数
        1 running	                        正在运行的进程数
        81 sleeping	                        睡眠的进程
        0 stopped	                        正在停止的进程
        0 zombie	                        僵尸进程。如果不是0，需要手工检查僵尸进程
    第三行为CPU信息 %Cpu(s):  
        0.7 us	                            用户模式占用的CPU百分比
        0.7 sy	                            系统模式占用的CPU百分比
        0.0 ni	                            改变过优先级的用户进程占用的CPU百分比
        98.7 id	                            空闲CPU的CPU百分比
        0.0 wa	                            等待输入/输出的进程的占用CPU百分比
        0.0 hi	                            硬中断请求服务占用的CPU百分比
        0.1 si	                            软中断请求服务占用的CPU百分比
        0.0 st	st（Steal  time）           虚拟时间百分比。就是当有虚拟机时，虚拟CPU等待实际CPU的时间百分比。
    第四行为物理内存信息 KiB Mem :
        1882016 total	                    物理内存的总量，单位KB
        634460 free	                        空闲的物理内存数量，我们使用的是虚拟机，总共只分配了628MB内存，所以只有53MB的空闲内存了
        150832 used	                        已经使用的物理内存数量
        1096724 buff/cache	                作为缓冲的内存数量
    第五行为交换分区信息 KiB Swap:
        0 total	                            交换分区（虚拟内存）的总大小
        0 free	                            空闲交换分区的大小
        0 used	                            已经使用的交互分区的大小
        1548284 avail Mem	                作为缓存的交互分区的大小
(5)、示例
    # top -d 1
    # top -i
    # top -p 2575
    
    执行上述命令后，可以按P、M、N对查询出的进程结果进行排序。
```
